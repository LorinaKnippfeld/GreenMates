
////////// zuerst database für pflanzen in garten 

CREATE TABLE plant_garden (
    id SERIAL UNIQUE PRIMARY KEY,
    common_name VARCHAR(255) NOT NULL,
    scientific_name VARCHAR(255) NOT NULL,
    image_url VARCHAR (500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

/// dann database function

exports.addPlant = (id) => {
    return db.query(
        `INSERT INTO plant_garden
            () 
        VALUES 
               ($1) 
        RETURNING 
            *
            `,
        [id]
    );
};

// Delete friend request

exports.deletePlant = (id) => {
    return db.query(
        "DELETE FROM plant_garden WHERE id=$1;",
        [id]
    );
};

exports.getPlants = (id) => {
     return db.query(
        `SELECT * FROM plant_garden WHERE id=$1 
        ORDER BY created_at DESC`,
        [id]
    );
};

//////// Server-Route um aktuelle Pflanze zu bekommen 

const database = require("../../database/database.js");

router.get("/api/plant-garden/", async (req, res) => {
    
    const result = await database.getPlants(id);
    const currentPlants = result.rows[0] 

    if (!currentPlants) {
        // no plants yet
        res.json({ status: });
    } else (currentPlants) {
        res.json({ status: }); /// ???

/////// Server-Route um Pflanze hinzuzfügen / löschen 

router.post("/api/plant-garden/:action/", async (req, res) => {
  
    if (action == ADD_PLANT) {
            await database.addPlant(id);
            res.json({ newStatus:  });

   const plant = {
       ...result.row[0];

   }         

    } else {
            await database.deletePlant(id);
            res.json({  });
          
    }


/////////////////////

action 

export const ADD_PLANT = "add plant";
export const DELETE_PLANT = "delete plant";

export const addPlant = async (id) => {
    const result = await axios.post("/api/plant-garden/add/" + id);
    const addPlant = result.data;
    return {
        type: ADD_PLANT,
        id: ,
    };
};

export const deletePlant = async (id) => {
    const result = await axios.post("/api/plant-garden/delete/" + id);
    return {
        type: DELETE_PLANT,
        id: ,
    };
};

/// reducer 


if (action.type == ADD_PLANT) {
        state = {
            ...state,
            plants: state.plants.map((plant) => {
                return plant 
                }
            }),
        };
    }

    if (action.type == DELETE_PLANT) {
        state = {
            ...state,
            plants: state.plants.filter((plant) => {
                return plant
                        }
            }),
        };
    }

// componente 

const STATUS_NO_PLANT = "no plant";
const STATUS_PLANT_ADDED = "added plant";


export default function PlantGarden() {
    const dispatch = useDispatch();
    const [garden, setGarden] = useState("");
}

// useEffect um den current Plant Garden zu bekommen 

useEffect(() => {
        axios.get("/api/plant-garden/").then((response) => {
            const { status } = response.data;
            setStatus(status);
        });
    }, []);

    // sendAction um die Action zu 

      const sendAction = async (action) => {
        const response = await axios.post(
            "/api/plant-garden/" + action
        );

        const { newStatus } = response.data;
        setStatus(newStatus);
    }; 

    // conditional rendering of button 

 if (status == STATUS_NO_PLANT) {
        return (
            <button onClick={(e) => sendAction(ADD_PLANT)}>
                Add plant
            </button>
        );
    } else {
        return (
            <button onClick={(e) => sendAction(DELETE_PLANT)}>
                Remove plant
            </button>
        );